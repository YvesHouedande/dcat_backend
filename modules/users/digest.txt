Directory structure:
└── users/
    ├── controllers/
    │   └── users.controller.js
    ├── routes/
    │   └── users.routes.js
    ├── services/
    │   └── users.service.js
    └── tests/
        └── users.mock.js

================================================
File: controllers/users.controller.js
================================================
ï»¿const userService = require('../services/');

module.exports = {
  getAll: (req, res, next) => {
    try {
      const users = userService.getAllUsers();
      res.json(users);
    } catch (err) {
      next(err);
    }
  },
  create: (req, res, next) => {
    try {
      const newUser = userService.createUser(req.body);
      res.status(201).json(newUser);
    } catch (err) {
      next(err);
    }
  }
};


================================================
File: routes/users.routes.js
================================================
ï»¿// const express = require('express');
// const router = express.Router();
// const { keycloak } = require('../../../core/auth/middleware');
// const UsersController = require('../controllers/users.controller');

// // Routes publiques
// router.get('/public', (req, res) => {
//   res.json({ message: 'Public user endpoint' });
// });

// // Routes protÃ©gÃ©es
// router.get('/', keycloak.protect('user'), UsersController.getAllUsers);
// router.post('/', keycloak.protect('admin'), UsersController.createUser);


// // start here
// router.post('/sync', controller.syncUser);

// // Exportez explicitement le routeur
// module.exports = router;



// const express = require('express');
// const router = express.Router();
// const UsersController = require('../controllers/users.controller');
// const { protect } = require('../../../core/auth/middleware');

// // VÃ©rification que le contrÃ´leur est bien chargÃ©
// console.log('UsersController:', UsersController); // Debug

// // Route de synchronisation
// router.post('/sync', UsersController.syncUser);

// // Route admin
// router.get('/', protect('admin'), UsersController.getAllUsers);

// module.exports = router;


================================================
File: services/users.service.js
================================================
const { users } = require('../tests/users.mock');



module.exports = {
  getAllUsers: () => {
    return users;
  },
  createUser: (UserData) => {
    const newUser = {
      id: users.length + 1,
      ...UserData,
      status: "nouveau",
      createdAt: new Date()
    };
    users.push(newUser);
    return newUser;
  }
};


================================================
File: tests/users.mock.js
================================================
module.exports = {
  users: [
    {
      id: 1,
      name: "CÃ¢ble HDMI",
      prenom: "hello",
      location: "EntrepÃ´t A",
      last_updated: "2025-03-01T10:00:00Z"
    },
    {
      id: 2,
      name: "test 2CÃ¢ble HDMI",
      prenom: "hello",
      location: "EntrepÃ´t B",
      last_updated: "2025-03-15T14:30:00Z"
    }
  ]
};

